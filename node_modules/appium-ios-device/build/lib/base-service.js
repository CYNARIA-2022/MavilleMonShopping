"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BaseServiceSocket = exports.BaseServicePlist = void 0;
require("source-map-support/register");
class BaseServiceSocket {
  constructor(socketClient) {
    this._socketClient = socketClient;
  }
  _assignClientFailureHandlers(...sourceStreams) {
    for (const evt in ['close', 'end']) {
      this._socketClient.once(evt, () => sourceStreams.map(s => s.unpipe(this._socketClient)));
    }
  }
  close() {
    if (!this._socketClient.destroyed) {
      this._socketClient.end();
    }
  }
}
exports.BaseServiceSocket = BaseServiceSocket;
class BaseServicePlist {
  constructor(plistService) {
    this._plistService = plistService;
  }
  close() {
    this._plistService.close();
  }
}
exports.BaseServicePlist = BaseServicePlist;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlU2VydmljZVNvY2tldCIsImNvbnN0cnVjdG9yIiwic29ja2V0Q2xpZW50IiwiX3NvY2tldENsaWVudCIsIl9hc3NpZ25DbGllbnRGYWlsdXJlSGFuZGxlcnMiLCJzb3VyY2VTdHJlYW1zIiwiZXZ0Iiwib25jZSIsIm1hcCIsInMiLCJ1bnBpcGUiLCJjbG9zZSIsImRlc3Ryb3llZCIsImVuZCIsImV4cG9ydHMiLCJCYXNlU2VydmljZVBsaXN0IiwicGxpc3RTZXJ2aWNlIiwiX3BsaXN0U2VydmljZSJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9iYXNlLXNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQmFzZVNlcnZpY2VTb2NrZXQge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoJ25ldCcpLlNvY2tldH0gc29ja2V0Q2xpZW50XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihzb2NrZXRDbGllbnQpIHtcbiAgICB0aGlzLl9zb2NrZXRDbGllbnQgPSBzb2NrZXRDbGllbnQ7XG4gIH1cblxuICBfYXNzaWduQ2xpZW50RmFpbHVyZUhhbmRsZXJzKC4uLnNvdXJjZVN0cmVhbXMpIHtcbiAgICBmb3IgKGNvbnN0IGV2dCBpbiBbJ2Nsb3NlJywgJ2VuZCddKSB7XG4gICAgICB0aGlzLl9zb2NrZXRDbGllbnQub25jZShldnQsXG4gICAgICAgICgpID0+IHNvdXJjZVN0cmVhbXMubWFwKChzKSA9PiBzLnVucGlwZSh0aGlzLl9zb2NrZXRDbGllbnQpKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgdW5kZXJseWluZyBzb2NrZXQgY29tbXVuaWNhdGluZyB3aXRoIHRoZSBwaG9uZVxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgaWYgKCF0aGlzLl9zb2NrZXRDbGllbnQuZGVzdHJveWVkKSB7XG4gICAgICB0aGlzLl9zb2NrZXRDbGllbnQuZW5kKCk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEJhc2VTZXJ2aWNlUGxpc3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoJy4vcGxpc3Qtc2VydmljZScpLlBsaXN0U2VydmljZX0gcGxpc3RTZXJ2aWNlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwbGlzdFNlcnZpY2UpIHtcbiAgICB0aGlzLl9wbGlzdFNlcnZpY2UgPSBwbGlzdFNlcnZpY2U7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSB1bmRlcmx5aW5nIHNvY2tldCBjb21tdW5pY2F0aW5nIHdpdGggdGhlIHBob25lXG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wbGlzdFNlcnZpY2UuY2xvc2UoKTtcbiAgfVxufVxuXG5cbmV4cG9ydCB7IEJhc2VTZXJ2aWNlU29ja2V0LCBCYXNlU2VydmljZVBsaXN0IH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxpQkFBaUIsQ0FBQztFQUl0QkMsV0FBV0EsQ0FBQ0MsWUFBWSxFQUFFO0lBQ3hCLElBQUksQ0FBQ0MsYUFBYSxHQUFHRCxZQUFZO0VBQ25DO0VBRUFFLDRCQUE0QkEsQ0FBQyxHQUFHQyxhQUFhLEVBQUU7SUFDN0MsS0FBSyxNQUFNQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUU7TUFDbEMsSUFBSSxDQUFDSCxhQUFhLENBQUNJLElBQUksQ0FBQ0QsR0FBRyxFQUN6QixNQUFNRCxhQUFhLENBQUNHLEdBQUcsQ0FBRUMsQ0FBQyxJQUFLQSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUNQLGFBQWEsQ0FBQyxDQUFDLENBQUM7SUFDakU7RUFDRjtFQUtBUSxLQUFLQSxDQUFBLEVBQUc7SUFDTixJQUFJLENBQUMsSUFBSSxDQUFDUixhQUFhLENBQUNTLFNBQVMsRUFBRTtNQUNqQyxJQUFJLENBQUNULGFBQWEsQ0FBQ1UsR0FBRyxDQUFDLENBQUM7SUFDMUI7RUFDRjtBQUNGO0FBQUNDLE9BQUEsQ0FBQWQsaUJBQUEsR0FBQUEsaUJBQUE7QUFFRCxNQUFNZSxnQkFBZ0IsQ0FBQztFQUlyQmQsV0FBV0EsQ0FBQ2UsWUFBWSxFQUFFO0lBQ3hCLElBQUksQ0FBQ0MsYUFBYSxHQUFHRCxZQUFZO0VBQ25DO0VBS0FMLEtBQUtBLENBQUEsRUFBRztJQUNOLElBQUksQ0FBQ00sYUFBYSxDQUFDTixLQUFLLENBQUMsQ0FBQztFQUM1QjtBQUNGO0FBQUNHLE9BQUEsQ0FBQUMsZ0JBQUEsR0FBQUEsZ0JBQUEifQ==